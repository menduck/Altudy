{% extends 'base.html' %}
{% load static %}
{% block style %}
  <link
  rel="stylesheet"
  type="text/css"
  href="{% static 'CSS/accounts/profile.css' %}"
  />
  <link
  rel="stylesheet"
  type="text/css"
  href="{% static 'CSS/card.css' %}"
  />
  <link
  rel="stylesheet"
  type="text/css"
  href="{% static 'CSS/main.css' %}"
  />
{% endblock style %}
{% block content %}

<div class="main__title">
  <h1><span>{{ request.user.emoji_username }} </span>ë‹˜ì˜ í”„ë¡œí•„</h1>
</div>
<div class="main__wrapper">
  <aside class="aside__container">
    <div class="aside__item" data-section="profile">ë‚´ í”„ë¡œí•„</div>
    <div class="aside__item" data-section="study">ë‚´ ìŠ¤í„°ë””</div>
    <div class="aside__item" data-section="code">ë‚´ ì½”ë“œ</div>
  </aside>

  <section class="right-content__container">
    {% block right_content %}
    {% endblock right_content %}
    {#ë‚´ í”„ë¡œí•„#}
    <section class="right_content-item__wrapper">
      <div>
        <h1 class="profile-title">ğŸ”— íšŒì›ì •ë³´</h1>
        <div class="profile-id"><span>ì•„ì´ë”” </span>{{ person.username }}</div>
        <div class="profile-email"><span>ì´ë©”ì¼ </span>{{ person.email }}</div>
        <div class=" profile-exp">
          <p>ë‚´ ë ˆë²¨</p>
          <div class="progress">
            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: {{ person.get_progress_percentage }}%"><p>EXP {{ person.get_progress_percentage }}% ({{ person.get_experience_from_level }} / {{ next_level_exp }})</p></div>
          </div>
          <p>LV. {{ person.get_level }}</p>

        </div>

        <div class="button-box">
          <a href="{% url 'accounts:update' %}"><div class="create-btn button-small">íšŒì›ì •ë³´ìˆ˜ì •</div></a>
          <form action="{% url 'accounts:delete' %}" method="POST">
            {% csrf_token %}
            <input type="submit" value="íšŒì›íƒˆí‡´" class="create-btn button-small">
          </form>
        </div>
      </div>      
    </section>
    {#ë‚´ ìŠ¤í„°ë””#}
    <section class="right_content-item__wrapper">
      <div>
        <h1 class="profile-title">ğŸ“¤ ë‚´ê°€ ì£¼ìµœí•œ ìŠ¤í„°ë””</h1>
        <div>
          {% if host_studies  %}
          <p>hi</p>
          <section class="myStudies__container">
            <div class="newStudies__wrapper">
              {% for host_study in host_studies %}
              <div class="newStudies__container">
                {% if host_study.announcements_count %}
                  <div class="alarm blinking">
                    {{ host_study.announcements_count }}
                  </div>
                {% endif %}
                <div class="newStudies-title card__title">{{ host_study.title }}</div>
                <div class="card__days-container">
                  {% for day in host_study.days %} 
                  <div class="card__day">{{ day }}</div>
                  {% endfor %}
                </div>
                <div class="card__language-container">
                  {% for language  in host_study.language %}
                  <div class="card__language">
                    <img src="{% static 'IMAGE/hashlogo/'|add:language|add:'.png' %}" alt="{{ language }} ì–¸ì–´ ë¡œê³ ">
                  </div>
                  {% endfor %}
                </div>
                <div class="newStudies-joinbutton__container">
                  <a href="{% url 'studies:mainboard' host_study.pk %}">
                    <button class="button-small joinbutton">ì…ì¥ í•˜ê¸°</button>
                  </a>
                </div>
              </div>
              {% endfor %}
            </div>   
          </section>
        {% endif %}
        </div>
      </div>
      <div>
        <h1 class="profile-title">ğŸ“¥ ë‚´ê°€ ê°€ì…í•œ ìŠ¤í„°ë””</h1>
        <div>
          {% if guest_studies %}
          <section class="myStudies__container">
            <div class="newStudies__wrapper">
              {% for guest_study in guest_studies %}
              <div class="newStudies__container">
                {% if guest_study.announcements_count %}
                  <div class="alarm blinking">
                    {{ guest_study.announcements_count }}
                  </div>
                {% endif %}
                <div class="newStudies-title card__title">{{ guest_study.study.title }}</div>
                <div class="card__days-container">
                  {% for day in guest_study.study.days %} 
                  <div class="card__day">{{ day }}</div>
                  {% endfor %}
                </div>
                <div class="card__language-container">
                  {% for language  in guest_study.study.language %}
                  <div class="card__language">
                    <img src="{% static 'IMAGE/hashlogo/'|add:language|add:'.png' %}" alt="{{ language }} ì–¸ì–´ ë¡œê³ ">
                  </div>
                  {% endfor %}
                </div>
                <div class="newStudies-joinbutton__container">
                  <a href="{% url 'studies:mainboard' guest_study.study.pk %}">
                    <button class="button-small joinbutton">ì…ì¥ í•˜ê¸°</button>
                  </a>
                </div>
              </div>
              {% endfor %}
            </div>   
          </section>
        {% endif %}
        </div>
      </div> 
    </section>
    {#ë‚´ ì½”ë“œ ëª¨ìŒ#}
    <section class="right_content-item__wrapper">
      <div>
        <h1 class="profile-title profile-data" data-username="{{person.username}}">ğŸ“ ì— ì œì¶œí•œ ë‚´ ì½”ë“œ</h1>
      </div>

      <!-- ë¦¬ë·° ëª©ë¡ -->
      <ul class="review-list">
        {% for review in reviews %}
        <li class="review-ele">
          <a href="{% url 'reviews:detail' review.pk %}">{{ review.content }}</a>
          <span>{{ review.created_at }}</span>
        </li>
        {% endfor %}
      </ul>
      <!-- í˜ì´ì§€ë„¤ì´ì…˜ ì»¨í…Œì´ë„ˆ -->
      <div class="pagination-container"></div>
      
    </section>
  </section>
</div>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="{% static 'JS/profile.js' %}"></script>
{% endblock content %}