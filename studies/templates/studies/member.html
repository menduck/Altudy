{% load static %} 
{% block style %}
<link
  rel="stylesheet"
  type="text/css"
  href="{% static 'CSS/studies/member.css' %}"
/>
{% endblock style %} 
{% block right_content %} 

{# ê°€ì…ìŠ¹ì¸ ìŠ¤í„°ë””ë§Œ ì¶œë ¥ #} 
{% if study.join_condition == 1 %}
<section>
  <h1 class="right_content-title">ğŸ’“ ê°€ì… ìš”ì²­</h1>
  {% if join_requests %}
  {% for request in join_requests %}
    <div class="join-request__container">
        <div class="request-message">
          <span>{{request}}</span> ë‹˜ê»˜ì„œ <span>{{study.title}}</span>ì— ì°¸ì—¬ë¥¼ ìš”ì²­í•˜ì…¨ìŠµë‹ˆë‹¤.
        </div>
        <div class="request-btns__containers">
          <form action="{% url 'studies:accept' study.pk request %}" method="post">
            {% csrf_token %}
            <button type="submit" class="button-small create-btn">ìŠ¹ì¸</button>
          </form>
          <form action="{% url 'studies:reject' study.pk request %}" method="post">
            {% csrf_token %}
            <button type="submit" class="button-small create-btn">ê±°ì ˆ</button>
          </form>
        </div>
    </div>
    <hr>
  {% endfor %}
  {% else %}
  <div class="null-message">ğŸ² ê°€ì… ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤!</div>
  {% endif %}
</section>
{% endif %}

{# ë©¤ë²„ ê´€ë¦¬ #}
<section>
  <h1 class="right_content-title">
    ğŸ” ë©¤ë²„ ê´€ë¦¬
  <span class="member-capacity__container"> ( <span>{{ study_members.count }}</span> / {{study.capacity}} )</span>
  </h1>
  {% for member in study_members %}
  <div class="member__container">
    {% if member.permission == 3 %}
    <div class="member"> {{ member.user.emoji_username }} - </div>
    <div class="member-leader"> ìŠ¤í„°ë””ì¥</div>
    {% else %}
        <div>{{ member.user.emoji_username }}</div>
        <form action="{% url 'studies:expel' study.pk member.user %}" method="POST" onsubmit="return confirm('ì •ë§ë¡œ ê°•í‡´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?');">
        {% csrf_token %}
          <input type="submit" value="ê°•í‡´">
        </form>
    {% endif %}

  </div>
  {% endfor %}
</section>

<section>
  <h1 class="right_content-title">ğŸ”’ ê°€ì… ì¡°ê±´ ê´€ë¦¬ </h1>
  <form id="condition-form" method="post" action="{% url 'studies:condition' study_pk=study.pk condition_num=0 %}">
    {% csrf_token %}
  
    <select id="condition-select" name="condition_num" data-condition="{{ study.join_condition }}" onchange="updateAction(this)">
      <option value="1" {% if study.join_condition == 1 %}selected{% endif %}>ìŠ¹ì¸ í•„ìš”</option>
      <option value="2" {% if study.join_condition == 2 %}selected{% endif %}>ë°”ë¡œ ê°€ì…</option>
      <option value="3" {% if study.join_condition == 3 %}selected{% endif %}>ê°€ì… ë¶ˆê°€</option>
    </select>
  
    <noscript>
      <input type="submit" value="ì¡°ê±´ ì—…ë°ì´íŠ¸">
    </noscript>
  </form>
</section>


{% endblock right_content %}
